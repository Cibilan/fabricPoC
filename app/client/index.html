<!-- SPDX-License-Identifier: Apache-2.0 -->

<!DOCTYPE html>
<html >
  <head>
    <title>Hyperledger Fabric Application</title>

    <!-- require jquery and bootstrap scripts -->
     <meta name="viewport" content="width=device-width, initial-scale=1">

     <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>

    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" />
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.0/css/font-awesome.css" />

      <!-- Angular Material style sheet -->
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/angular_material/1.1.8/angular-material.min.css">
    <link rel="stylesheet" href="content/css/md-steppers.css">

      <!-- Angular Material requires Angular.js Libraries -->
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.3/angular.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.3/angular-animate.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.3/angular-aria.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.3/angular-messages.min.js"></script>

  <!-- Angular Material Library -->
  <script src="https://ajax.googleapis.com/ajax/libs/angular_material/1.1.8/angular-material.min.js"></script>

  <script src="md-steppers.js"></script>



      <!-- requiring the angular page -->
    <script type="text/javascript" src="app.js"> </script>

  </head>

  <body ng-app="application" ng-controller="appController" ng-cloak>
   
  <div id= "body" style="width: 980px; margin: 0 auto"> 
   <md-toolbar>
      <div class="md-toolbar-tools">
        <md-button class="md-icon-button" aria-label="Side Panel" ng-click="openSideNavPanel()">
        <md-tooltip>Menu</md-tooltip>
        <md-icon md-svg-icon="img/icons/ic_menu_white_48px.svg"></md-icon>
        </md-button>
        <h2 class="md-toolbar-item md-breadcrumb md-headline ng-isolate-scope">
            <span class="md-breadcrumb-page ng-binding"> HyperLegder Fabric PoC</span>
        </h2>

        <span flex></span>

        <md-button class="md-raised md-accent" aria-label="Learn More" ng-click= "queryCon()">
          Reload
        </md-button>

        <md-button class="md-icon-button md-accent" aria-label="Users" href="#/Login">
          <md-icon md-svg-src="img/icons/ic_account_circle_white_48px.svg"></md-icon>          
        </md-button>
        <md-select ng-model="user" placeholder="user1" class="md-no-underline">
          <md-tooltip>Select User</md-tooltip>
          <md-option value="user1">user1</md-option>
          <md-option value="user2">user2</md-option>
          <md-option value="user3">user3</md-option>
          <md-option value="user4">user4</md-option>
          <md-option value="user5">user5</md-option>
        </md-select>
      </div>
  </md-toolbar>

<!--Query All Contracts -->
<md-card layout-padding>
  <md-card-header>
    <md-card-header-text>
      <span class="md-title"> Query All Contracts</span>
    </md-card-header-text>
  <md-card-actions layout="row" layout-align="end center">
    <md-button id="queryAllCon"  ng-click="queryAllCon()" class="md-raised md-primary md-hue-1"> Query </md-button>
  </md-card-actions>  
  </md-card-header>
  <md-content>
    <div ng-show="allcon">
    <table id="all_con" class="table" align="center">

        <tr>
          <th>ID</th>
          <th>createdby</th>
          <th>createdon</th>
          <th>details</th>
          <th>stage</th>
        </tr>

        <tr ng-repeat="con in all_con">
          <td>{{con.Key}}</td>
          <td>{{con.createdby}}</td>
          <td>{{con.createdon * 1000 | date:'yyyy-MM-dd HH:mm:ss Z'}}</td>
          <td>{{con.details}}</td>
          <td>{{con.stage}}</td>
        </tr>
      </table>
    </div>
  </md-content>
</md-card>

<!--Query Single Contracts -->
<md-card flex md-theme="default">
    <md-card-header>
    <md-card-header-text>
      <span class="md-title"> Get Contract Details</span>
    </md-card-header-text>
      </md-card-header>
    <md-content layout-padding>
     
     <md-input-container class="md-block">
          <label>Contract ID</label>
          <input ng-model="con_id" />
          <div class="hint">CON##</div>
      </md-input-container> 


  </md-content> 
        <md-card-actions layout="row" layout-align="end center">
    <md-button ng-click="queryCon()" class="md-raised md-primary md-hue-1"> Submit </md-button>
  </md-card-actions>
  </md-card>  

  <md-card flex>

    <md-steppers md-selected="stepper.selected" md-stretch-steppers="always">
        <md-step label="Contract Created" md-complete="stepper.step1Completed">
            <md-content layout="row">
                <md-card flex="30" >
                  <md-card-header>
                    <span class="md-title"> Steps</span>
                  </md-card-header>
                  <md-card-content>
                    <ol>
                      <li>Contract Created</li>
                    </ol>
                  </md-card-content>
                </md-card>
                <md-card flex = "70">
                  <md-card-title>
                    <span class="md-title">Transaction</span>
                  </md-card-title>
                  <md-card-content>
                      <table class="table">
                        <thead>
                          <tr>
                            <th> </th>
                            <th> User </th>
                            <th> Description </th>
                            <th> Timestamp </th>
                          </tr>
                        </thead>
                        <tr ng-repeat="list in stage1 | orderBy : 'timestamp' ">
                          <td> <md-icon style="color:green" md-svg-icon="img/icons/ic_done_black_16px.svg"></md-icon></td>
                          <td>{{list.user}}</td>
                          <td>{{list.details}}</td>
                          <td>{{ list.timestamp * 1000 | date:'yyyy-MM-dd HH:mm:ss Z'}}</td>
                        </tr>
                      </table>
                  </md-card-content>
                </md-card>
            </md-content>
        </md-step>
        <md-step label="Contract Activation" md-complete="stepper.step2Completed" ng-disabled="stepper.disable">
            <md-content layout="row">
                <md-card flex="30">
                  <md-card-header>
                    <span class="md-title"> Steps</span>
                  </md-card-header>
                  <md-card-content>
                    <ol>
                      <li>Upload Documents</li>
                      <li>Add Parties</li>
                      <li>Add Condition</li>
                      <li>Activate contract</li>
                    </ol>
                  </md-card-content>
                </md-card>
                <md-card flex="60">
                  <md-card-title>
                    <span class="md-title">Transaction</span>
                  </md-card-title>
                  <md-card-content>
                      <table class="table">
                        <thead>
                          <tr>
                            <th> </th>
                            <th> User </th>
                            <th> Description </th>
                            <th> Timestamp </th>
                          </tr>
                        </thead>
                        <tr ng-repeat="list in stage2 | orderBy : 'timestamp' ">
                          <td> <md-icon style="color:green" md-svg-icon="img/icons/ic_done_black_16px.svg"></md-icon></td>
                          <td>{{list.user}}</td>
                          <td>{{list.details}}</td>
                          <td>{{ list.timestamp * 1000 | date:'yyyy-MM-dd HH:mm:ss Z'}}</td>
                        </tr>
                      </table>
                  </md-card-content>
                </md-card>
            </md-content>
        </md-step>
        <md-step label="Contract Signing" md-complete="stepper.step3Completed" ng-disabled="stepper.disable">
             <md-content layout="row">
                <md-card flex="30">
                  <md-card-header>
                    <span class="md-title"> Steps</span>
                  </md-card-header>
                  <md-card-content>
                    <ol>
                      <li>Parties Signing Contract</li>
                    </ol>
                  </md-card-content>
                </md-card>
                <md-card flex="70">
                  <md-card-title>
                    <span class="md-title">Transaction</span>
                  </md-card-title>
                  <md-card-content>
                      <table class="table">
                        <thead>
                          <tr>
                            <th> </th>
                            <th> User </th>
                            <th> Description </th>
                            <th> Timestamp </th>
                          </tr>
                        </thead>
                        <tr ng-repeat="list in stage3 | orderBy : 'timestamp' ">
                          <td> <md-icon style="color:green" md-svg-icon="img/icons/ic_done_black_16px.svg"></md-icon></td>
                          <td>{{list.user}}</td>
                          <td>{{list.details}}</td>
                          <td>{{ list.timestamp * 1000 | date:'yyyy-MM-dd HH:mm:ss Z'}}</td>
                        </tr>
                      </table>
                  </md-card-content>
                </md-card>
            </md-content>
        </md-step>  
        <md-step label="Contract Validation" md-complete="stepper.step4Completed" ng-disabled="stepper.disable">
            <md-content layout="row">
                <md-card flex="30">
                 <md-card-header>
                    <span class="md-title"> Steps</span>
                  </md-card-header>
                  <md-card-content>
                    <ol>
                      <li>Contract Validation</li>

                    </ol>
                  </md-card-content>
                </md-card>
                <md-card flex="70">
                  <md-card-title>
                    <span class="md-title">Transaction</span>
                  </md-card-title>
                  <md-card-content>
                      <table class="table">
                        <thead>
                          <tr>
                            <th> </th>
                            <th> User </th>
                            <th> Description </th>
                            <th> Timestamp </th>
                          </tr>
                        </thead>
                        <tr ng-repeat="list in stage4 | orderBy : 'timestamp' ">
                          <td> <md-icon style="color:green" md-svg-icon="img/icons/ic_done_black_16px.svg"></md-icon></td>
                          <td>{{list.user}}</td>
                          <td>{{list.details}}</td>
                          <td>{{ list.timestamp * 1000 | date:'yyyy-MM-dd HH:mm:ss Z'}}</td>
                        </tr>
                      </table>
                  </md-card-content>
                </md-card>
            </md-content>
        </md-step>

    </md-steppers>

</md-card>
<!-- Contract Details-->
<md-card>
  <md-card-header>
    <md-card-header-text>
      <span class="md-title"> Contract Details </span>
    </md-card-header-text>
  </md-card-header>
<div layout="row" layout-align="center">  
  <md-card-title >
      <md-card-title-text> 
        <span>Contract ID</span>
      </md-card-title-text>
      <md-card-title-text> 
        <span class="md-subhead"> {{con.Key}} </span>
      </md-card-title-text>
  </md-card-title>  
  <md-card-title >
      <md-card-title-text> 
        <span>Created By</span>
      </md-card-title-text>
      <md-card-title-text> 
        <span class="md-subhead"> {{con.createdby}} </span>
      </md-card-title-text>
  </md-card-title> 
    <md-card-title >
      <md-card-title-text> 
        <span>Created On</span>
      </md-card-title-text>
      <md-card-title-text> 
        <span class="md-subhead"> {{con.createdon}} </span>
      </md-card-title-text>
  </md-card-title> 

</div>

<div layout="row" layout-align="center">  
  </md-card-title> 
    <md-card-title >
      <md-card-title-text> 
        <span>Current Stage</span>
      </md-card-title-text>
      <md-card-title-text> 
        <span class="md-subhead"> {{con.stage}} </span>
      </md-card-title-text>
      </md-card-title> 
      <md-card-title >
      <md-card-title-text> 
        <span> Condition</span>
      </md-card-title-text>
      <md-card-title-text> 
        <span class="md-subhead"> {{con.condition}} </span>
      </md-card-title-text>
  </md-card-title>
      <md-card-title >
      <md-card-title-text> 
        <span> Progress </span>
      </md-card-title-text>
      <md-card-title-text> 
        <span class="md-subhead"> {{con.progress}} </span>
      </md-card-title-text>
    </md-card-title>
          <md-card-title >
      <md-card-title-text> 
        <span> Validation </span>
      </md-card-title-text>
      <md-card-title-text> 
        <span class="md-subhead"> {{con.validation}} </span>
      </md-card-title-text>
    </md-card-title>
    
</div>
 
    <md-card-title >
      <md-card-title-text flex="30"> 
        <span> Details </span>
      </md-card-title-text>
      <md-card-title-text> 
        <span class="md-subhead"> {{con.details}} </span>
      </md-card-title-text>
    </md-card-title>  
    <md-card-title>
      <md-card-title-text flex="30"> 
        <span> Document Names</span>
      </md-card-title-text>
      <md-card-title-text> 
        <span class="md-subhead"> {{con.docname}} </span>
      </md-card-title-text>
  </md-card-title>    
    <md-card-title >
      <md-card-title-text flex="30"> 
        <span> Document Hash</span>
      </md-card-title-text>
      <md-card-title-text> 
        <span class="md-subhead"> {{con.dochash}} </span>
      </md-card-title-text>
    </md-card-title>  
   
</md-card>  

<!-- Add Contract-->
<md-card>
    <md-card-header>
    <md-card-header-text>
      <span class="md-title"> Add New Contract </span>
      
    </md-card-header-text>
  </md-card-header>
  <md-content layout-padding>
      <md-input-container class="md-block">
          <label>Contract ID</label>
          <input ng-model="newCon.id" />
          <div class="hint">CON##</div>
      </md-input-container>
      <md-input-container class="md-block">
          <label> Contract Details</label>
          <input ng-model="newCon.detail" />
      </md-input-container>

  </md-content>  
      <md-card-actions layout="row" layout-align="space-between center">
        <h5 style="color:green;margin-bottom:2%"> {{new_Con_Success}}</h5>
      <md-button ng-click="addCon()" class="md-raised md-primary md-hue-1"> Add Contract </md-button>
    </md-card-actions>

</md-card>

<!-- Party List -->
<md-card>
  <md-card-header>
    <md-card-header-text>
      <span class="md-title"> Party List </span>      
    </md-card-header-text>
  </md-card-header>
  <md-content layout-padding>
    <table id="all_party" class="table" align="center">
        <tr>
          <th>Party Name</th>
          <th>Mandantory</th>
          <th>Weightage </th>
        </tr>

        <tr ng-repeat="party in all_party">
          <td>{{party.name}}</td>
          <td>{{party.mandatory}}</td>
          <td>{{party.weight}}</td>          
        </tr>
      </table> 

    </md-content>

 </md-card>
 
 <!-- Add Party -->
 <md-card>    
    <md-card-header>
    <md-card-header-text>
      <span class="md-title"> Add Party </span>      
    </md-card-header-text>
  </md-card-header>
     <md-content layout-padding Layout="row" layout-align = "space-around center">
     <md-input-container class="md-block">
          <label>Party Name</label>
          <input ng-model="newParty.partyName" />
      </md-input-container> 
      <md-input-container class="md-block">
          <md-checkbox ng-model="newParty.mandatory" aria-label="Mandatory">
            Mandatory: {{newParty.mandatory}}
          </md-checkbox>
      </md-input-container> 

      <md-input-container class="md-block">
            <label>Weightage (Disabled)</label>
            <input value="1.0" disabled>
      </md-input-container>
  
    </md-content>

    <md-card-actions layout="row" layout-align="end center">
        
      <md-button ng-click="addParty()" class="md-raised md-primary md-hue-1"> Add Party </md-button>
    </md-card-actions>

    <h5 style="color:green;margin-bottom:2%" > {{new_Party_Success}}</h5>


</md-card> 

<!-- Add Document and Activate-->

<md-card>
  <md-card-header>
    <md-card-header-text>
      <span class="md-title"> Add Document and Activate </span>      
    </md-card-header-text>
  </md-card-header>
  <md-content layout-padding Layout="row" layout-align = "space-around center">
     <md-input-container class="md-block">
      <label>Select the document</label>
        <input id="fileInput" type="file">  
    </md-button>
  </md-input-container> 
       <md-input-container class="md-block">
          <label>Set Condition</label>
          <input type="number" ng-model="act.condition" />
          <div class="hint">Number of parties to sign</div>
      </md-input-container> 
  </md-content>  
  <md-card-actions layout="row" layout-align="end center">
        
      <md-button ng-click="conAct()" class="md-raised md-primary md-hue-1"> Activate </md-button>
    </md-card-actions>

    <h5 style="color:green;margin-bottom:2%" id="success_create">Success! Tx ID: {{new_Con_Success}}</h5>

</md-card>  

<!-- Party Signing-->

<md-card>
  <md-card-header>
    <md-card-header-text>
      <span class="md-title"> Sign the contract </span>      
    </md-card-header-text>
  </md-card-header>
  <md-content>
      <md-list>
            <md-list-item ng-repeat="party in all_party" >
            <md-icon md-svg-src="img/icons/baseline-account_box-24px.svg"></md-icon>
            <p>{{ party.name }}</p>
            <p>{{ party.mandatory }}</p>
            <p>{{ party.signed }}</p>
            <p> {{ party.weight }} </p>
            <md-checkbox class="md-secondary" ng-model="party.selected" ></md-checkbox>
      </md-list>  
  </md-content>  
  <md-card-actions layout="row" layout-align="space-between center">      
      <p style="color:green;margin-bottom:2%" >  {{new_Con_Success}}</p>
      <md-button ng-click="addParty()" class="md-raised md-primary md-hue-1"> Sign </md-button>
  </md-card-actions>

</md-card>  

</div>

 <md-button class="md-fab md-fab-bottom-right docs-scroll-fab scrolling" docs-scroll-class="scrolling" aria-label="createOrder" href="#/createOrder">
  <md-icon md-svg-src="img/icons/ic_add_white_48px.svg"></md-icon> 
  <md-tooltip>Create new contract</md-tooltip> 
</md-button>     

</body>

</html>